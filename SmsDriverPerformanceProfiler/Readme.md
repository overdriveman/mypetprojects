# SmsDriverPerformanceProfiler

Я ехал в автобусе и увидел объявление, которое я решил взять за основу учебного проекта (смотри картинку ниже).
Захотелось спроектировать и написать сервис, который разбирает и преобразует одну строку `NNNN K O` в объект с типизированными данными.
В дальнейшем данный сервис можно использовать, например, как часть приложения для разбора sms сообщений или REST микро сервис.

## Что я использовал

* Возможности core java
  + Регулярные выражения для проверки формата строки
  + Optional для потенциально не инициализированных переменных
  + Enum для конечного фиксированного набора значений с автоматической проверкой на этапе компиляции
* Шаблоны проектирования и архитектурные решения
  + Шаблон builder
  + Принципы SOLID при проектировании классов
  + Покрытие кода модульными тестами и конфигурация автоматического запуска тестов перед каждой сборкой
* Maven
  + Использую для автоматической сборки приложения 
  + Сборка в fatjar (единый исполняемый jar файл, который содержит в себе все зависимости) при помощи плагина shade
  + Запуск модульных тестов с помощью surefire плагина
  + Для обработки аннотаций lombok настроен maven-compiler-plugin (добавлена директива annotationProcessorPaths для JDK 9+)   
  + Проект использует Java 11 (задается property <maven.compiler.release>11</...> в pom.xml)
* Lombok
  + Для авто генерации шаблонного кода 
  + Использовались аннотации: @Slf4j @Builder @Getter @ToString @AllArgConstructor
* Slf4j + Logback
  + Для журналирования всех этапов работы программы
  + Позволяет удобно настроить уровни журналирования (info, warn, error) и варианты выводы (файл или консоль)
  + Использую placehodler'ы для добавления деталей в сообщение
  + Файл настроек ./src/main/resources/logback.xml
* Junit5 
  + Написано 48 тестов для 3 классов

## Запуск

```shell
mvn clean package
cd target
java -jar SmsProfiler.jar
```

## Примеры работы

```shell
java -jar SmsProfiler.jar mta ав141х 2 5
16:11:24.087 [main] INFO  su.wrath.InputParser Успешно обработали вызов парсера: 'mta ав141х 2 5'
Московский городской автобус c номером ав141х за поведение кондуктора/водителя получил оценку отлично
```

```shell
java -jar SmsProfiler.jar mta ав141х 2 9
16:12:13.690 [main] WARN  su.wrath.MsgValidator Неверно указана оценка: '9'
16:12:13.696 [main] WARN  su.wrath.InputParser Ошибка обработки: 'mta ав141х 2 9'
Обработка прошла с ошибкой! Код ошибки: 6, значение: Неверно указана оценка
```

```shell
java -jar SmsProfiler.jar абырвалг
16:12:49.081 [main] WARN  su.wrath.MsgValidator Некорректный формат входных данных: 'абырвалг'
16:12:49.086 [main] WARN  su.wrath.InputParser Ошибка обработки: 'абырвалг'
Обработка прошла с ошибкой! Код ошибки: 1, значение: Некорректный формат входных данных
```

```shell
java -jar SmsProfiler.jar mta z145zz 2 5
16:13:26.478 [main] WARN  su.wrath.MsgValidator Неверно указан номер ТС: 'z145zz'
16:13:26.485 [main] WARN  su.wrath.InputParser Ошибка обработки: 'mta z145zz 2 5'
Обработка прошла с ошибкой! Код ошибки: 4, значение: Неверно указан номер ТС
```

## Объявление в автобусе

# ![alt text](./src/test/java/resources/img.png)
